-- $Name:The Journeyman$
-- $Version: 1.0$
instead_version "1.3.0"

-- game_prerequisites
game.codepage="UTF-8";

-- reqired modules
require "xact"
require "para"
require "dash"
require "quotes"
require "hideinv"

-- default game actions
game.act = function ()
	local reaction = {
	[1] = 'Это невозможно',
	[2] = 'Ничего не выйдет',
	[3] = 'Так не получится',
	};
	return reaction [rnd(#reaction)];
end;
game.inv = 'Не получается';
game.use = function ()
	local reaction = {
	[1] = 'Бесполезно',
	[2] = 'Это неверно',
	[3] = 'Надо попробовать что-нибудь еще',
	};
	return reaction [rnd(#reaction)];
end;

-- game_body
main = room {         
	nam = 'The Journeyman',
	dsc = [[Тишина. Такой тишины и спокойствия я еще никогда не ощущал. Мне очень хочеться спать, но я {open|открываю} глаза.^^]],
	obj = {
		xact ('open', code [[goto(captain_room0);]]),
		},
};

captain_room0 = room{
	nam = 'Комната капитана',
	pic = 'pics/start_0.jpg',
	dsc = [[Перед глазами, все словно в тумане, я вижу застывшие надо мной предметы. Вот моя кружка висит прямо над моей головой. Я вижу снежный шар, присматриваюсь, застывшие снежинки никуда не падают. Я вижу свою щетку, ее слабое неоновое мерцание. Время, кажется, остановилось. Пустота обволакивает меня, и я закрываю глаза. {sleep|Темнота} ]],
	obj = {
		xact ('sleep' , code [[goto(captain_room);]]),
		},
		
};
	
captain_room = room {
	nam = 'Комната капитана',
	dsc = [[Мне очень холодно, почему так холодно? Проснись, {wakeup|проснись}!]],
	obj = {
		xact ('wakeup', code [[goto(captain_room1);]]),
		},
};

captain_room1 = room {
	var = {
	dressed = false;
	},
	nam = 'Комната капитана',
	dsc = [[Я открываю глаза и пытаюсь понять где нахожусь. Я лежу на кровати. Мое тело зафиксировано спальными ремнями, на мне нет верхней одежды и от этого ужасно холодно. Я пытаюсь вспомнить, как сюда попал и что произошло, но у меня ничего не получается.  В голове пустота. Я пытаюсь встать и освободиться от ремней, которые удерживают меня, но руки дрожат и не слушаются. Я чувствую, что спал слишком долго.^
	В конце концов я отстегиваю ремни и, вдруг, я чувствую, как легко поднимаюсь вверх над кроватью. До меня наконец доходит, что в комнате невесомость. Я медленно начинаю осознавать, где я нахожусь, однако сильных холод мешает мне cконцентрироваться, мысли разбигаются, и я с трудом нахожу в себе силы, чтобы взять себя в руки и как следует {look_around|осмотреться}.]],
	obj = {
		xact ('look_around', code [[goto(captain_room2);]]),
		},
};

captain_room2 = room {
	nam = 'Комната капитана',
	dsc = [[Это небольшая комната с одноместной кроватью. Повсюду, словно в замедленной съемке, плавают различные предметы. Комната окутана полумраком, лишь слабое свечение окна позволяет мне рассмотреть некоторые детали. Я легко отталкиваюсь от кровати и в ту же секунду оказываюсь в центре комнаты, краем плеча я задеваю свою щетку, которая, крутясь, быстро отлетает в сторону.]],
	way = {
		'window',
		'dresser',
		'table',
		'door',
		'safe',
		'bookshelf',
		'bed',
		},
};

window = room {
	var = {
		ent0 = false;
	},
	nam = 'Окно-иллюминатор',
	dsc = [[Слабое, мягкое свечение звезд - единственный источник света в этой комнате. Я понимаю, что нахожусь на корабле в открытом космосе и стараюсь вспомнить, как я сюда попал. Вспоминаю, что я метеоролог и вроде как меня наняли на работу по контракту на год или два.^
Я смотрю в иллюминатор. Корабль, похоже, никуда не движется и находится в дрейфующем полете, я понимаю, что двигатели отключены.]],
	exit = { 
		ent0 = true;
	},
};

dresser = room {
	var = {
		ent1 = false;
	},
	nam = 'Комод',
	dsc = [[Это простой металлический комод, где хранится одежда. Выполненный в стиле 70-х еще двадцатого века, а может мне так просто кажется. Такие ящики устанавливают почти на все транспортные суда.^]],
	obj = {
		'outfit',
	},
	exit = {
		ent1 = true;
	},
};

outfit = obj {
	nam = 'комод',
	dsc = [[Я присматриваюсь и только сейчас замечаю наскольно странно он выглядит в этой холодной темной комнате. Словно неудачный фрагмент из далекого прошлого, напоминание о времени, когда человеческие потребности сводились к маленькому уютному домику, машине и зеленому газону.^
	Комод довольно вместительный и не занимает много места. Может {там} я найду одежду, уж больно холодно.^
	Я понимаю, что на корабле не работает и система обогрева.^.]].
	act = function(outfit)
		p 'Я приподнимаю металлическую крышку и нахожу внутри что-то мягкое. Это комбинезон из неопрена, сине-зеленого цвета с белыми вставками на сгибах. Стандартный костюм для пилота, гардероб которого не отличается большим разнообразием. Отлично! Я одеваю комбинезон. ',
		outfit._dressed = true;
		end,
};
		